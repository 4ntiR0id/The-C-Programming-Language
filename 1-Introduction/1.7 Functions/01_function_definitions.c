/*
 * ============================================================================
 * Chapter 1: Introduction
 * Section 1.7: Functions
 * Topic: Function definitions
 * ============================================================================
 * 
 * ما هي الدالة (Function)؟
 * --------------------------
 * الدالة هي كتلة من الكود لها اسم، يمكن استدعاؤها من أماكن مختلفة.
 * تأخذ مدخلات (parameters) وتُرجع مخرجات (return value).
 * 
 * لماذا نستخدم الدوال؟
 * ----------------------
 * 1. تجنب تكرار الكود: نكتب الكود مرة ونستخدمه عدة مرات
 * 2. التنظيم: نقسم البرنامج الكبير لأجزاء صغيرة مفهومة
 * 3. إعادة الاستخدام: يمكن استخدام الدالة في برامج مختلفة
 * 4. سهولة الصيانة: تعديل الدالة في مكان واحد يؤثر على كل استخداماتها
 * 5. الاختبار: يمكن اختبار كل دالة بشكل منفصل
 * 
 * كل برنامج C يجب أن يحتوي على دالة main():
 * - هي نقطة بداية البرنامج
 * - يمكننا إنشاء دوال أخرى للمساعدة
 * 
 * ============================================================================
 */

/*
 * ============================================================================
 * بنية تعريف الدالة (Function Definition)
 * ============================================================================
 * 
 * الصيغة:
 * -------
 * return_type function_name(parameter_list)
 * {
 *     declarations
 *     statements
 *     return value;
 * }
 * 
 * return_type: نوع القيمة التي تُرجعها الدالة (int, float, void, إلخ)
 * function_name: اسم الدالة
 * parameter_list: قائمة المدخلات (يمكن أن تكون فارغة)
 * declarations: إعلانات المتغيرات المحلية
 * statements: أوامر الدالة
 * return: إرجاع قيمة للمستدعي
 * 
 * ============================================================================
 */


/*
 * ============================================================================
 * مثال 1: دالة بسيطة بدون معاملات (parameters)
 * ============================================================================
 */

/*
 * تعريف دالة تطبع رسالة ترحيب:
 * --------------------------------
 * 
 * لاحظ:
 * - الاسم: print_greeting
 * - لا تأخذ معاملات: ()
 * - لا تُرجع قيمة (ستتعلم void لاحقاً)
 * - في K&R الأولى، عدم ذكر نوع الإرجاع يعني int ضمنياً
 */
print_greeting()
{
    /*
     * محتوى الدالة:
     * -------------
     * ببساطة تطبع رسالة
     */
    printf("Hello from a function!\n");
}


/*
 * ============================================================================
 * مثال 2: دالة مع معامل واحد
 * ============================================================================
 */

/*
 * دالة تطبع رقم:
 * --------------
 * 
 * int n: معامل من نوع int اسمه n
 * - n هو متغير محلي داخل الدالة
 * - قيمته تأتي من المستدعي
 */
print_number(n)
int n;  /* إعلان نوع المعامل - أسلوب K&R الأول */
{
    /*
     * نستخدم n داخل الدالة:
     */
    printf("The number is: %d\n", n);
}


/*
 * ============================================================================
 * مثال 3: دالة مع عدة معاملات
 * ============================================================================
 */

/*
 * دالة تطبع معلومات طالب:
 * -------------------------
 * 
 * تأخذ ثلاثة معاملات:
 * - name: رقم يمثل اسم (مبسط للمثال)
 * - age: العمر
 * - grade: الدرجة
 */
print_student(name, age, grade)
int name;   /* في K&R الأولى، نُعلن عن كل معامل في سطر منفصل */
int age;
int grade;
{
    printf("Student #%d\n", name);
    printf("Age: %d\n", age);
    printf("Grade: %d\n", grade);
}


/*
 * ============================================================================
 * مثال 4: دالة تستدعي دالة أخرى
 * ============================================================================
 */

/*
 * دالة تطبع خط من النجوم:
 * ------------------------
 */
print_line()
{
    int i;
    
    for (i = 0; i < 40; i = i + 1) {
        putchar('*');
    }
    putchar('\n');
}

/*
 * دالة تطبع عنوان مع خطوط:
 * --------------------------
 */
print_title(title)
int title;
{
    /*
     * نستدعي دالة أخرى من داخل هذه الدالة:
     */
    print_line();
    printf("Title: %d\n", title);
    print_line();
}


/*
 * ============================================================================
 * الدالة الرئيسية: main
 * ============================================================================
 */

main()
{
    printf("Example 1: Functions without parameters\n");
    printf("========================================\n\n");
    
    /*
     * استدعاء الدالة:
     * ---------------
     * نكتب اسم الدالة متبوعاً بأقواس ()
     * 
     * ماذا يحدث؟
     * 1. التنفيذ ينتقل إلى الدالة print_greeting
     * 2. تُنفذ أوامر الدالة
     * 3. التنفيذ يعود لهنا (للسطر التالي)
     */
    print_greeting();
    
    printf("\n");
    
    
    printf("Example 2: Function with one parameter\n");
    printf("=======================================\n\n");
    
    /*
     * استدعاء مع معامل:
     * ------------------
     * نمرر القيمة داخل الأقواس
     */
    print_number(42);
    print_number(100);
    print_number(-5);
    
    printf("\n");
    
    
    printf("Example 3: Function with multiple parameters\n");
    printf("=============================================\n\n");
    
    /*
     * تمرير عدة معاملات:
     * -------------------
     * نفصل بينها بفاصلة
     * الترتيب مهم!
     */
    print_student(101, 20, 85);
    print_student(102, 19, 92);
    
    printf("\n");
    
    
    printf("Example 4: Function calling another function\n");
    printf("=============================================\n\n");
    
    print_title(999);
}


/*
 * ============================================================================
 * أمثلة عملية أكثر
 * ============================================================================
 */

/*
 * دالة لحساب القوة (power):
 * ---------------------------
 * تحسب base^n (base مرفوع للقوة n)
 */
power(base, n)
int base, n;  /* يمكن إعلان عدة معاملات في سطر واحد */
{
    int result;
    int i;
    
    /*
     * حساب القوة باستخدام حلقة:
     */
    result = 1;
    for (i = 0; i < n; i = i + 1) {
        result = result * base;
    }
    
    /*
     * طباعة النتيجة:
     * (لاحقاً سنتعلم كيف نُرجع القيمة بدلاً من طباعتها)
     */
    printf("%d^%d = %d\n", base, n, result);
}


/*
 * دالة لطباعة جدول الضرب:
 * -------------------------
 */
multiplication_table(n)
int n;
{
    int i;
    
    printf("\nMultiplication table for %d:\n", n);
    for (i = 1; i <= 10; i = i + 1) {
        printf("%d x %d = %d\n", n, i, n * i);
    }
}


/*
 * دالة لطباعة مصفوفة:
 * --------------------
 */
print_array(arr, size)
int arr[];  /* معامل من نوع مصفوفة */
int size;
{
    int i;
    
    printf("Array: ");
    for (i = 0; i < size; i = i + 1) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}


/*
 * دالة لإيجاد الأكبر في مصفوفة:
 * -------------------------------
 */
find_max(arr, size)
int arr[];
int size;
{
    int max;
    int i;
    
    /*
     * نفترض أول عنصر هو الأكبر:
     */
    max = arr[0];
    
    /*
     * نبحث في باقي العناصر:
     */
    for (i = 1; i < size; i = i + 1) {
        if (arr[i] > max) {
            max = arr[i];
        }
    }
    
    printf("Maximum value: %d\n", max);
}


/*
 * دالة لعكس مصفوفة:
 * ------------------
 */
reverse_array(arr, size)
int arr[];
int size;
{
    int i, temp;
    
    /*
     * نبادل العناصر من الطرفين:
     */
    for (i = 0; i < size / 2; i = i + 1) {
        temp = arr[i];
        arr[i] = arr[size - 1 - i];
        arr[size - 1 - i] = temp;
    }
}


/*
 * برنامج لاختبار الدوال العملية:
 */
test_practical_functions()
{
    int numbers[5];
    int i;
    
    printf("\n\nPractical Function Examples\n");
    printf("===========================\n\n");
    
    
    /* اختبار power */
    printf("Power function:\n");
    power(2, 3);   /* 2^3 = 8 */
    power(5, 2);   /* 5^2 = 25 */
    power(10, 3);  /* 10^3 = 1000 */
    
    
    /* اختبار multiplication_table */
    multiplication_table(7);
    
    
    /* اختبار print_array و find_max */
    printf("\nArray functions:\n");
    numbers[0] = 23;
    numbers[1] = 67;
    numbers[2] = 12;
    numbers[3] = 89;
    numbers[4] = 45;
    
    printf("Original: ");
    print_array(numbers, 5);
    
    find_max(numbers, 5);
    
    
    /* اختبار reverse_array */
    reverse_array(numbers, 5);
    printf("Reversed: ");
    print_array(numbers, 5);
}


/*
 * ============================================================================
 * مثال: تحويل Fahrenheit إلى Celsius كدالة
 * ============================================================================
 */

/*
 * دالة تحول من Fahrenheit إلى Celsius:
 * --------------------------------------
 */
fahr_to_celsius(fahr)
int fahr;
{
    int celsius;
    
    celsius = 5 * (fahr - 32) / 9;
    printf("%d°F = %d°C\n", fahr, celsius);
}


/*
 * دالة تطبع جدول تحويل:
 * ----------------------
 */
print_conversion_table(lower, upper, step)
int lower, upper, step;
{
    int fahr;
    
    printf("\nFahrenheit to Celsius Table\n");
    printf("---------------------------\n");
    
    for (fahr = lower; fahr <= upper; fahr = fahr + step) {
        fahr_to_celsius(fahr);
    }
}


/*
 * اختبار دوال التحويل:
 */
test_conversion()
{
    printf("\n\nConversion Functions\n");
    printf("====================\n");
    
    print_conversion_table(0, 100, 20);
}


/*
 * ============================================================================
 * Expected Output:
 * ============================================================================
 * Example 1: Functions without parameters
 * ========================================
 * 
 * Hello from a function!
 * 
 * Example 2: Function with one parameter
 * =======================================
 * 
 * The number is: 42
 * The number is: 100
 * The number is: -5
 * 
 * Example 3: Function with multiple parameters
 * =============================================
 * 
 * Student #101
 * Age: 20
 * Grade: 85
 * Student #102
 * Age: 19
 * Grade: 92
 * 
 * Example 4: Function calling another function
 * =============================================
 * 
 * ****************************************
 * Title: 999
 * ****************************************
 * 
 * 
 * Practical Function Examples
 * ===========================
 * 
 * Power function:
 * 2^3 = 8
 * 5^2 = 25
 * 10^3 = 1000
 * 
 * Multiplication table for 7:
 * 7 x 1 = 7
 * 7 x 2 = 14
 * 7 x 3 = 21
 * ...
 * 7 x 10 = 70
 * 
 * Array functions:
 * Original: Array: 23 67 12 89 45 
 * Maximum value: 89
 * Reversed: Array: 45 89 12 67 23 
 * 
 * 
 * Conversion Functions
 * ====================
 * 
 * Fahrenheit to Celsius Table
 * ---------------------------
 * 0°F = -17°C
 * 20°F = -6°C
 * 40°F = 4°C
 * 60°F = 15°C
 * 80°F = 26°C
 * 100°F = 37°C
 * 
 * ============================================================================
 * ملاحظات مهمة:
 * ============================================================================
 * 
 * 1. أسلوب K&R الأول في تعريف الدوال:
 *    function_name(param1, param2)
 *    int param1;
 *    int param2;
 *    {
 *        ...
 *    }
 *    - المعاملات تُسرد في الأقواس
 *    - أنواعها تُعلن بعد ذلك
 *    - هذا الأسلوب القديم (تغير في ANSI C)
 * 
 * 2. ترتيب التعريف:
 *    - في K&R الأولى، يجب تعريف الدالة قبل استدعائها
 *    - أو استخدام إعلان مسبق (forward declaration)
 * 
 * 3. النطاق (Scope):
 *    - المعاملات والمتغيرات المحلية موجودة فقط داخل الدالة
 *    - تُنشأ عند دخول الدالة وتُدمر عند الخروج
 * 
 * 4. المصفوفات كمعاملات:
 *    - تُمرر بالمرجع (by reference) تلقائياً
 *    - التغييرات داخل الدالة تؤثر على المصفوفة الأصلية
 *    - يجب تمرير الحجم كمعامل منفصل
 * 
 * 5. الاستدعاء:
 *    - function_name(arguments);
 *    - عدد ونوع الـ arguments يجب أن يطابق المعاملات
 * 
 * 6. بدون return:
 *    - في هذه الأمثلة، الدوال تطبع ولا تُرجع قيم
 *    - سنتعلم return في الملف التالي
 * 
 * ============================================================================
 */

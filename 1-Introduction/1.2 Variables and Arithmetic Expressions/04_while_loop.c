/*
 * ============================================================================
 * Chapter 1: Introduction
 * Section 1.2: Variables and Arithmetic Expressions
 * Topic: The while loop
 * ============================================================================
 * 
 * ما هي حلقة while؟
 * ------------------
 * حلقة while تكرر تنفيذ مجموعة من الأوامر طالما أن شرط معين صحيح.
 * 
 * لماذا نحتاج الحلقات؟
 * ---------------------
 * - لتكرار عمليات دون كتابة نفس الكود مراراً
 * - لمعالجة كميات كبيرة من البيانات
 * - لبناء برامج فعّالة ومرنة
 * 
 * ============================================================================
 */

main()
{
    /*
     * ============================================================================
     * مثال تمهيدي: طباعة الأرقام من 1 إلى 5
     * ============================================================================
     */
    
    int count;
    
    /* نبدأ من 1 */
    count = 1;
    
    /*
     * بنية حلقة while:
     * ----------------
     * while (condition)
     *     statement;
     * 
     * أو مع عدة أوامر:
     * while (condition) {
     *     statement1;
     *     statement2;
     * }
     * 
     * كيف تعمل؟
     * ---------
     * 1. تفحص الشرط (condition)
     * 2. إذا كان صحيحاً (true)، نفذ الأوامر
     * 3. ارجع للخطوة 1
     * 4. إذا كان خاطئاً (false)، توقف واخرج من الحلقة
     */
    
    while (count <= 5) {
        /* طباعة القيمة الحالية */
        printf("%d\n", count);
        
        /* زيادة count بمقدار 1 */
        count = count + 1;  /* مهم جداً: بدون هذا السطر، الحلقة لن تتوقف! */
    }
    
    printf("Done!\n");
    
    
    /*
     * ============================================================================
     * مثال عملي كامل: جدول تحويل Fahrenheit إلى Celsius
     * ============================================================================
     * 
     * نريد طباعة جدول من 0 إلى 300 درجة فهرنهايت
     * بخطوات قدرها 20 درجة
     */
    
    int fahr, celsius;
    int lower, upper, step;
    
    /* تحديد حدود الجدول */
    lower = 0;      /* الحد الأدنى للجدول */
    upper = 300;    /* الحد الأعلى */
    step = 20;      /* حجم الخطوة */
    
    /* البداية من الحد الأدنى */
    fahr = lower;
    
    /* طباعة عنوان الجدول */
    printf("\nFahrenheit-Celsius Table\n");
    printf("------------------------\n");
    
    /*
     * الحلقة الرئيسية:
     * ----------------
     * الشرط: fahr <= upper
     * يعني: طالما fahr أقل من أو يساوي upper، استمر
     * 
     * لماذا <= وليس <؟
     * - نريد تضمين 300 في الجدول
     * - لو استخدمنا <، الجدول سيتوقف عند 280
     */
    while (fahr <= upper) {
        /*
         * حساب قيمة Celsius المقابلة
         * المعادلة: C = 5/9 * (F - 32)
         * 
         * ملاحظة: نكتب 5 * (fahr-32) / 9 بدلاً من (fahr-32) * 5/9
         * لماذا؟ لأن 5/9 في الأعداد الصحيحة = 0
         * نضرب في 5 أولاً للحصول على نتيجة أدق
         */
        celsius = 5 * (fahr - 32) / 9;
        
        /*
         * طباعة السطر
         * %d للعدد الأول (fahr)
         * \t تعني Tab (مسافة منظمة)
         * %d للعدد الثاني (celsius)
         * \n للانتقال لسطر جديد
         */
        printf("%d\t%d\n", fahr, celsius);
        
        /*
         * زيادة fahr بمقدار step
         * هذا السطر حاسم:
         * - بدونه، fahr سيبقى عند قيمته الأولى
         * - الشرط fahr <= upper سيكون دائماً صحيحاً
         * - الحلقة لن تتوقف أبداً (infinite loop)
         */
        fahr = fahr + step;
    }
    
    /*
     * بعد انتهاء الحلقة:
     * - fahr الآن يساوي 320 (أكبر من upper)
     * - الشرط fahr <= upper أصبح خاطئاً
     * - البرنامج يخرج من الحلقة ويكمل
     */
    
    printf("End of table\n");
    
    
    /*
     * ============================================================================
     * مثال على أهمية تحديث المتغير
     * ============================================================================
     */
    
    int n;
    n = 0;
    
    printf("\nCounting to 3:\n");
    
    while (n < 3) {
        printf("%d\n", n);
        n = n + 1;  /* لو أزلنا هذا السطر، ماذا سيحدث؟ */
                    /* الحلقة لن تتوقف! n سيبقى 0 للأبد */
    }
    
    
    /*
     * ============================================================================
     * تشريح الحلقة: ماذا يحدث خطوة بخطوة؟
     * ============================================================================
     * 
     * لنفترض: lower=0, upper=40, step=20
     * 
     * قبل الحلقة:
     * -----------
     * fahr = 0
     * 
     * الدورة الأولى:
     * --------------
     * 1. فحص الشرط: 0 <= 40؟ نعم ✓
     * 2. حساب: celsius = 5*(0-32)/9 = -17
     * 3. طباعة: 0    -17
     * 4. تحديث: fahr = 0 + 20 = 20
     * 
     * الدورة الثانية:
     * ---------------
     * 1. فحص الشرط: 20 <= 40؟ نعم ✓
     * 2. حساب: celsius = 5*(20-32)/9 = -6
     * 3. طباعة: 20   -6
     * 4. تحديث: fahr = 20 + 20 = 40
     * 
     * الدورة الثالثة:
     * ---------------
     * 1. فحص الشرط: 40 <= 40؟ نعم ✓
     * 2. حساب: celsius = 5*(40-32)/9 = 4
     * 3. طباعة: 40   4
     * 4. تحديث: fahr = 40 + 20 = 60
     * 
     * محاولة الدورة الرابعة:
     * ----------------------
     * 1. فحص الشرط: 60 <= 40؟ لا ✗
     * 2. الخروج من الحلقة
     * 
     */
}

/*
 * ============================================================================
 * Expected Output:
 * ============================================================================
 * 1
 * 2
 * 3
 * 4
 * 5
 * Done!
 * 
 * Fahrenheit-Celsius Table
 * ------------------------
 * 0	-17
 * 20	-6
 * 40	4
 * 60	15
 * 80	26
 * 100	37
 * 120	48
 * 140	60
 * 160	71
 * 180	82
 * 200	93
 * 220	104
 * 240	115
 * 260	126
 * 280	137
 * 300	148
 * End of table
 * 
 * Counting to 3:
 * 0
 * 1
 * 2
 * 
 * ============================================================================
 * ملاحظات مهمة:
 * ============================================================================
 * 
 * 1. الشرط في while
 *    - يُفحص قبل كل تكرار
 *    - إذا كان خاطئاً من البداية، لن تُنفذ الحلقة أبداً
 *    - مثال: while (5 < 3) لن ينفذ أبداً
 * 
 * 2. تحديث متغير الحلقة ضروري
 *    - بدون تحديث، قد تحصل على حلقة لا نهائية
 *    - الحلقة اللانهائية تجمد البرنامج
 * 
 * 3. الأقواس المعقوفة { }
 *    - ضرورية إذا كان في الحلقة أكثر من أمر واحد
 *    - حتى لو كان أمر واحد، يُفضل استخدامها للوضوح
 * 
 * 4. المسافات والتنسيق
 *    - الأوامر داخل الحلقة عادة تُزاح لليمين (indentation)
 *    - هذا يجعل الكود أسهل للقراءة
 * 
 * 5. عوامل المقارنة في الشرط
 *    - <  أصغر من
 *    - <= أصغر من أو يساوي
 *    - >  أكبر من
 *    - >= أكبر من أو يساوي
 *    - == يساوي (مهم: علامتان =)
 *    - != لا يساوي
 * 
 * 6. الحلقة اللانهائية
 *    - خطر يجب تجنبه
 *    - تأكد دائماً أن الشرط سيصبح خاطئاً في وقت ما
 *    - مثال على حلقة لانهائية:
 *      while (1) { ... }  // 1 دائماً صحيح
 * 
 * ============================================================================
 */

/*
 * ============================================================================
 * Chapter 1: Introduction
 * Section 1.5: Character Input and Output
 * Topic: putchar
 * ============================================================================
 * 
 * ما هي putchar؟
 * ---------------
 * putchar(c) دالة تطبع حرفاً واحداً على الشاشة (المخرجات القياسية).
 * تأخذ حرفاً كمدخل وتطبعه.
 * 
 * لماذا مهمة؟
 * -----------
 * - أساس طباعة الأحرف في C
 * - أبسط وأسرع من printf للأحرف المفردة
 * - تُستخدم لبناء دوال طباعة أكثر تعقيداً
 * - تكملة مثالية لـ getchar
 * 
 * العلاقة مع getchar:
 * -------------------
 * - getchar: قراءة حرف
 * - putchar: طباعة حرف
 * - معاً يشكلان أساس معالجة النصوص في C
 * 
 * ============================================================================
 */

main()
{
    /*
     * ============================================================================
     * مثال أساسي: طباعة حرف واحد
     * ============================================================================
     */
    
    int c;
    
    printf("Example 1: Printing single characters\n");
    printf("======================================\n");
    
    /*
     * putchar(c): تطبع الحرف المُمرر لها
     * --------------------------------------
     * الصيغة: putchar(character);
     */
    
    c = 'A';
    putchar(c);      /* تطبع: A */
    putchar('\n');   /* تطبع سطر جديد */
    
    /*
     * يمكن تمرير الحرف مباشرة:
     */
    putchar('B');
    putchar('\n');
    
    /*
     * طباعة رقم (سيُطبع كحرف حسب رمز ASCII):
     */
    putchar(65);     /* 65 هو رمز ASCII للحرف 'A' */
    putchar('\n');
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * مثال: طباعة كلمة حرف بحرف
     * ============================================================================
     */
    
    printf("Example 2: Printing a word character by character\n");
    printf("==================================================\n");
    
    /*
     * طباعة "Hello" باستخدام putchar:
     */
    putchar('H');
    putchar('e');
    putchar('l');
    putchar('l');
    putchar('o');
    putchar('\n');
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * مثال: نسخ المدخلات للمخرجات (Input to Output)
     * ============================================================================
     * 
     * هذا المثال الكلاسيكي من K&R
     * نقرأ بـ getchar ونطبع بـ putchar
     */
    
    printf("Example 3: Copy input to output\n");
    printf("===============================\n");
    printf("Enter text (Ctrl+D to end):\n");
    
    /*
     * البرنامج الأساسي لنسخ المدخلات:
     * --------------------------------
     * يقرأ كل حرف ويطبعه فوراً
     */
    while ((c = getchar()) != EOF) {
        /*
         * putchar(c): تطبع الحرف الذي قرأناه
         * ------------------------------------
         * ببساطة: ما تدخله يُطبع كما هو
         */
        putchar(c);
    }
    
    printf("\n\n");
}


/*
 * ============================================================================
 * أمثلة عملية على putchar
 * ============================================================================
 */

example_print_line()
{
    /*
     * مثال: طباعة خط من النجوم
     * --------------------------
     */
    
    int i;
    
    printf("Example 4: Printing a line\n");
    printf("==========================\n");
    
    /*
     * نطبع 50 نجمة باستخدام حلقة
     */
    for (i = 0; i < 50; i = i + 1) {
        putchar('*');
    }
    putchar('\n');
    
    printf("\n");
}


example_uppercase_to_lowercase()
{
    /*
     * مثال: تحويل الأحرف الكبيرة إلى صغيرة
     * --------------------------------------
     */
    
    int c;
    
    printf("Example 5: Convert uppercase to lowercase\n");
    printf("==========================================\n");
    printf("Enter text (Ctrl+D to end):\n");
    
    while ((c = getchar()) != EOF) {
        /*
         * فحص إذا كان الحرف كبيراً (A-Z):
         */
        if (c >= 'A' && c <= 'Z') {
            /*
             * تحويل من كبير لصغير:
             * ---------------------
             * الفرق بين 'a' و 'A' ثابت في ASCII
             * 'a' - 'A' = 32
             * 
             * لذلك: حرف_صغير = حرف_كبير + ('a' - 'A')
             */
            c = c + ('a' - 'A');
        }
        
        /*
         * طباعة الحرف (صغير أو كما هو):
         */
        putchar(c);
    }
    
    printf("\n\n");
}


example_replace_spaces()
{
    /*
     * مثال: استبدال المسافات بنجوم
     * ------------------------------
     */
    
    int c;
    
    printf("Example 6: Replace spaces with asterisks\n");
    printf("=========================================\n");
    printf("Enter text (Ctrl+D to end):\n");
    
    while ((c = getchar()) != EOF) {
        /*
         * إذا كان الحرف مسافة:
         */
        if (c == ' ') {
            /*
             * اطبع نجمة بدلاً منها
             */
            putchar('*');
        }
        else {
            /*
             * اطبع الحرف كما هو
             */
            putchar(c);
        }
    }
    
    printf("\n\n");
}


example_compress_spaces()
{
    /*
     * مثال: ضغط المسافات المتعددة إلى مسافة واحدة
     * --------------------------------------------
     * مثلاً: "Hello    World" تصبح "Hello World"
     */
    
    int c;
    int lastchar;  /* آخر حرف طُبع */
    
    printf("Example 7: Compress multiple spaces\n");
    printf("====================================\n");
    printf("Enter text (Ctrl+D to end):\n");
    
    /*
     * نهيئ lastchar بقيمة ليست مسافة
     * لضمان طباعة أول مسافة نواجهها
     */
    lastchar = 'X';
    
    while ((c = getchar()) != EOF) {
        /*
         * نطبع الحرف فقط إذا:
         * - لم يكن مسافة، أو
         * - كان مسافة لكن الحرف السابق لم يكن مسافة
         */
        if (c != ' ' || lastchar != ' ') {
            putchar(c);
            /*
             * نحفظ الحرف الذي طبعناه
             */
            lastchar = c;
        }
        /*
         * إذا كان c مسافة و lastchar مسافة:
         * نتجاهل هذه المسافة (لا نطبعها)
         */
    }
    
    printf("\n\n");
}


example_visible_whitespace()
{
    /*
     * مثال: جعل المسافات البيضاء مرئية
     * -----------------------------------
     * تحويل:
     * - مسافة → [SP]
     * - tab → [TAB]
     * - سطر جديد → [NL] ثم سطر جديد
     */
    
    int c;
    
    printf("Example 8: Make whitespace visible\n");
    printf("===================================\n");
    printf("Enter text (Ctrl+D to end):\n");
    
    while ((c = getchar()) != EOF) {
        /*
         * فحص نوع المسافة البيضاء:
         */
        if (c == ' ') {
            /*
             * بدلاً من طباعة مسافة، نطبع [SP]
             */
            putchar('[');
            putchar('S');
            putchar('P');
            putchar(']');
        }
        else if (c == '\t') {
            /*
             * بدلاً من tab، نطبع [TAB]
             */
            putchar('[');
            putchar('T');
            putchar('A');
            putchar('B');
            putchar(']');
        }
        else if (c == '\n') {
            /*
             * نطبع [NL] ثم ننتقل لسطر جديد
             */
            putchar('[');
            putchar('N');
            putchar('L');
            putchar(']');
            putchar('\n');
        }
        else {
            /*
             * الأحرف العادية تُطبع كما هي
             */
            putchar(c);
        }
    }
    
    printf("\n\n");
}


example_count_and_print()
{
    /*
     * مثال: عد وطباعة في نفس الوقت
     * -------------------------------
     */
    
    int c;
    long count;
    
    printf("Example 9: Count while printing\n");
    printf("================================\n");
    printf("Enter text (Ctrl+D to end):\n");
    
    count = 0;
    
    while ((c = getchar()) != EOF) {
        /*
         * putchar ترجع الحرف المطبوع
         * يمكننا استخدام ذلك
         */
        putchar(c);
        
        /*
         * عد الأحرف
         */
        ++count;
    }
    
    /*
     * printf لطباعة العدد (لأن putchar للأحرف فقط)
     */
    printf("\nTotal characters: %ld\n\n", count);
}


example_print_histogram()
{
    /*
     * مثال: رسم رسم بياني بسيط
     * ----------------------------
     * لكل رقم نطبع عدد من النجوم يساويه
     */
    
    int c, i, digit;
    
    printf("Example 10: Simple histogram\n");
    printf("============================\n");
    printf("Enter digits (Ctrl+D to end):\n");
    
    while ((c = getchar()) != EOF) {
        /*
         * نتحقق إذا كان رقماً
         */
        if (c >= '0' && c <= '9') {
            /*
             * نحول الحرف لرقم:
             * '0' يصبح 0، '1' يصبح 1، إلخ
             */
            digit = c - '0';
            
            /*
             * نطبع الرقم
             */
            putchar(c);
            putchar(':');
            putchar(' ');
            
            /*
             * نطبع عدد من النجوم يساوي الرقم
             */
            for (i = 0; i < digit; i = i + 1) {
                putchar('*');
            }
            
            putchar('\n');
        }
    }
    
    printf("\n");
}


/*
 * ============================================================================
 * المقارنة بين putchar و printf
 * ============================================================================
 */

compare_putchar_printf()
{
    int c;
    
    printf("Example 11: putchar vs printf\n");
    printf("=============================\n\n");
    
    c = 'A';
    
    /*
     * باستخدام putchar:
     * ------------------
     * أبسط وأسرع للأحرف المفردة
     */
    printf("Using putchar: ");
    putchar(c);
    putchar('\n');
    
    /*
     * باستخدام printf:
     * -----------------
     * أكثر مرونة لكن أبطأ
     */
    printf("Using printf:  %c\n", c);
    
    /*
     * متى نستخدم كل واحدة؟
     * ---------------------
     * putchar: للأحرف المفردة (أسرع)
     * printf: للتنسيق المعقد أو النصوص الطويلة
     */
    
    printf("\n");
}


/*
 * ============================================================================
 * Expected Behavior (أمثلة على الاستخدام):
 * ============================================================================
 * 
 * Example 1:
 * ----------
 * Output:
 *   A
 *   B
 *   A
 * 
 * 
 * Example 2:
 * ----------
 * Output: Hello
 * 
 * 
 * Example 3 (Copy):
 * -----------------
 * Input:  Hello World!
 * Output: Hello World!
 * 
 * 
 * Example 4 (Line):
 * -----------------
 * Output: **************************************************
 * 
 * 
 * Example 5 (Uppercase to lowercase):
 * -----------------------------------
 * Input:  Hello WORLD!
 * Output: hello world!
 * 
 * 
 * Example 6 (Replace spaces):
 * ---------------------------
 * Input:  Hello World
 * Output: Hello*World
 * 
 * 
 * Example 7 (Compress spaces):
 * ----------------------------
 * Input:  Hello    World
 * Output: Hello World
 * 
 * 
 * Example 8 (Visible whitespace):
 * -------------------------------
 * Input:  Hello	World
 * Output: Hello[TAB]World[NL]
 * 
 * 
 * Example 10 (Histogram):
 * -----------------------
 * Input:  352
 * Output: 
 *   3: ***
 *   5: *****
 *   2: **
 * 
 * ============================================================================
 * ملاحظات مهمة:
 * ============================================================================
 * 
 * 1. البساطة:
 *    - putchar أبسط دالة للطباعة
 *    - تأخذ حرف واحد فقط
 *    - لا تحتاج تنسيق
 * 
 * 2. الأداء:
 *    - putchar أسرع من printf للأحرف المفردة
 *    - printf تحلل النص وتبحث عن %
 *    - putchar تطبع مباشرة
 * 
 * 3. الاستخدام:
 *    - putchar(c) - طباعة حرف
 *    - putchar('\n') - سطر جديد
 *    - putchar('\t') - tab
 * 
 * 4. القيمة المُرجعة:
 *    - putchar ترجع الحرف المطبوع
 *    - أو EOF في حالة خطأ
 * 
 * 5. مع getchar:
 *    - getchar و putchar يعملان معاً بشكل مثالي
 *    - نمط: while ((c = getchar()) != EOF) putchar(c);
 * 
 * 6. الأحرف الخاصة:
 *    - '\n' - سطر جديد
 *    - '\t' - tab
 *    - '\\' - backslash
 *    - '\'' - single quote
 * 
 * ============================================================================
 * متى نستخدم putchar؟
 * ============================================================================
 * 
 * استخدم putchar عندما:
 * ----------------------
 * 1. تطبع حرف واحد فقط
 * 2. تريد أفضل أداء
 * 3. لا تحتاج تنسيق معقد
 * 4. تعالج نص حرف بحرف
 * 
 * استخدم printf عندما:
 * ---------------------
 * 1. تطبع أكثر من حرف
 * 2. تحتاج تنسيق (%d, %f, إلخ)
 * 3. تطبع نصوص ثابتة
 * 4. تطبع أنواع بيانات مختلفة
 * 
 * ============================================================================
 */

/*
 * ============================================================================
 * Chapter 1: Introduction
 * Section 1.4: Symbolic Constants
 * Topic: Defining constants using #define
 * ============================================================================
 * 
 * ما هي الثوابت الرمزية (Symbolic Constants)؟
 * -----------------------------------------------
 * الثابت الرمزي هو اسم نعطيه لقيمة ثابتة لا تتغير أثناء تشغيل البرنامج.
 * نستخدم #define لإنشاء هذه الثوابت.
 * 
 * لماذا نستخدم الثوابت الرمزية؟
 * ---------------------------------
 * 1. الوضوح: LOWER أوضح من 0 في السياق
 * 2. سهولة التعديل: تغيير القيمة في مكان واحد فقط
 * 3. تجنب الأخطاء: لا يمكن تغيير قيمتها بالخطأ
 * 4. قابلية الصيانة: الكود أسهل للتحديث لاحقاً
 * 
 * الفرق بين الثابت والمتغير:
 * -----------------------------
 * - المتغير (int x): يمكن تغيير قيمته أثناء التنفيذ
 * - الثابت (#define X): قيمة ثابتة لا تتغير أبداً
 * 
 * ============================================================================
 */

/*
 * ============================================================================
 * تعريف الثوابت باستخدام #define
 * ============================================================================
 * 
 * الصيغة:
 * -------
 * #define NAME value
 * 
 * ملاحظات مهمة:
 * -------------
 * 1. لا توجد فاصلة منقوطة ; في نهاية السطر
 * 2. يُكتب عادةً بحروف كبيرة (UPPER_CASE)
 * 3. يُكتب خارج الدوال (في بداية الملف)
 * 4. ليس أمراً تنفيذياً، بل توجيه للمترجم
 */

/*
 * تعريف الثوابت لمثال جدول التحويل:
 * -----------------------------------
 */

/*
 * LOWER: الحد الأدنى لجدول التحويل
 * القيمة: 0 درجة فهرنهايت
 * 
 * لماذا ثابت؟ لأن الحد الأدنى لا يتغير أثناء تنفيذ البرنامج
 */
#define LOWER 0

/*
 * UPPER: الحد الأعلى لجدول التحويل
 * القيمة: 300 درجة فهرنهايت
 */
#define UPPER 300

/*
 * STEP: حجم الخطوة بين كل قيمة والتالية
 * القيمة: 20 درجة
 */
#define STEP 20


main()
{
    /*
     * ============================================================================
     * مثال بدون استخدام الثوابت الرمزية
     * ============================================================================
     */
    
    int fahr, celsius;
    
    printf("Example 1: Without symbolic constants\n");
    printf("======================================\n\n");
    printf("Fahr\tCels\n");
    
    /*
     * المشكلة في هذا الكود:
     * - الأرقام 0, 300, 20 تظهر مباشرة ("magic numbers")
     * - غير واضح ماذا تعني هذه الأرقام
     * - لو أردنا تغيير النطاق، نحتاج البحث في كل الكود
     */
    for (fahr = 0; fahr <= 300; fahr = fahr + 20) {
        celsius = 5 * (fahr - 32) / 9;
        printf("%d\t%d\n", fahr, celsius);
    }
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * مثال باستخدام الثوابت الرمزية
     * ============================================================================
     */
    
    printf("Example 2: With symbolic constants\n");
    printf("===================================\n\n");
    printf("Fahr\tCels\n");
    
    /*
     * استخدام الثوابت:
     * -----------------
     * نستخدم LOWER, UPPER, STEP كما لو كانت أعداد
     * 
     * المترجم يستبدلها تلقائياً بقيمها:
     * - LOWER يصبح 0
     * - UPPER يصبح 300
     * - STEP يصبح 20
     * 
     * هذه العملية تسمى "استبدال نصي" (text substitution)
     * تحدث قبل الترجمة الفعلية
     */
    for (fahr = LOWER; fahr <= UPPER; fahr = fahr + STEP) {
        /*
         * فوائد استخدام LOWER, UPPER, STEP:
         * -----------------------------------
         * 1. الكود أوضح: نعرف مباشرة أن fahr يبدأ من الحد الأدنى
         * 2. سهل التعديل: لو أردنا تغيير النطاق، نغير سطر واحد فقط
         * 3. أقل عرضة للأخطاء: لا نحتاج تعديل عدة أماكن
         */
        celsius = 5 * (fahr - 32) / 9;
        printf("%d\t%d\n", fahr, celsius);
    }
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * أمثلة أخرى على استخدام #define
     * ============================================================================
     */
}


/*
 * تعريف ثوابت رياضية:
 * --------------------
 */
#define PI 3.14159          /* قيمة باي π */
#define E 2.71828           /* قيمة أويلر e */

/*
 * تعريف حدود:
 * -----------
 */
#define MAX_LENGTH 100      /* أقصى طول للنص */
#define MIN_AGE 18          /* الحد الأدنى للعمر */

/*
 * تعريف رموز ذات معنى:
 * ---------------------
 */
#define TRUE 1              /* تمثيل القيمة "صحيح" */
#define FALSE 0             /* تمثيل القيمة "خطأ" */

/*
 * تعريف أحرف خاصة:
 * -----------------
 */
#define NEWLINE '\n'        /* رمز السطر الجديد */
#define TAB '\t'            /* رمز التبويب */


/*
 * دالة توضح استخدام الثوابت المختلفة:
 */
example_constants()
{
    int radius, age;
    float area, circumference;
    
    /*
     * ============================================================================
     * استخدام ثوابت رياضية
     * ============================================================================
     */
    
    printf("Example 3: Mathematical constants\n");
    printf("==================================\n\n");
    
    radius = 5;
    
    /*
     * استخدام PI بدلاً من كتابة 3.14159 في كل مرة:
     * - أوضح
     * - أدق (لو غيرنا الدقة، نغيرها في مكان واحد)
     */
    area = PI * radius * radius;
    circumference = 2 * PI * radius;
    
    printf("Circle with radius %d:\n", radius);
    printf("Area = %f\n", area);
    printf("Circumference = %f\n\n", circumference);
    
    
    /*
     * ============================================================================
     * استخدام ثوابت للشروط
     * ============================================================================
     */
    
    printf("Example 4: Using constants in conditions\n");
    printf("=========================================\n\n");
    
    age = 20;
    
    /*
     * استخدام MIN_AGE بدلاً من 18:
     * - لو تغير القانون، نغير مكان واحد فقط
     * - الكود يشرح نفسه: نتحقق من الحد الأدنى للعمر
     */
    if (age >= MIN_AGE) {
        printf("Age %d: Eligible\n", age);
    } else {
        printf("Age %d: Not eligible\n", age);
    }
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * استخدام TRUE و FALSE
     * ============================================================================
     */
    
    printf("Example 5: Boolean-like constants\n");
    printf("==================================\n\n");
    
    int is_valid;
    
    /*
     * استخدام TRUE و FALSE يجعل الكود أوضح:
     * بدلاً من: is_valid = 1;
     * نكتب: is_valid = TRUE;
     * 
     * الكود يقرأ مثل اللغة الطبيعية
     */
    is_valid = TRUE;
    
    if (is_valid == TRUE) {
        printf("Status: Valid\n");
    } else {
        printf("Status: Invalid\n");
    }
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * استخدام ثوابت الأحرف الخاصة
     * ============================================================================
     */
    
    printf("Example 6: Character constants\n");
    printf("==============================\n\n");
    
    /*
     * استخدام NEWLINE و TAB:
     * يجعل الكود أكثر وضوحاً
     */
    printf("Name");
    printf("%c", TAB);      /* طباعة tab */
    printf("Age");
    printf("%c", NEWLINE);  /* طباعة سطر جديد */
    
    printf("John");
    printf("%c", TAB);
    printf("25");
    printf("%c", NEWLINE);
}


/*
 * ============================================================================
 * مثال عملي كامل: برنامج يحول وحدات مختلفة
 * ============================================================================
 */

/* تعريف عوامل التحويل كثوابت */
#define INCHES_PER_FOOT 12
#define CM_PER_INCH 2.54
#define FEET_PER_MILE 5280

conversion_example()
{
    int feet, inches;
    float centimeters, miles;
    
    printf("Example 7: Unit conversion with constants\n");
    printf("==========================================\n\n");
    
    /*
     * تحويل القدم إلى بوصة:
     */
    feet = 5;
    inches = feet * INCHES_PER_FOOT;
    printf("%d feet = %d inches\n", feet, inches);
    
    /*
     * تحويل البوصة إلى سنتيمتر:
     */
    centimeters = inches * CM_PER_INCH;
    printf("%d inches = %.2f cm\n", inches, centimeters);
    
    /*
     * لو أردنا تغيير عامل التحويل:
     * - نغير فقط #define CM_PER_INCH
     * - لا نحتاج تعديل باقي الكود
     */
    
    printf("\n");
}


/*
 * ============================================================================
 * ملاحظات مهمة على #define
 * ============================================================================
 */

compare_define_with_variable()
{
    int fahr;
    
    printf("Important Notes\n");
    printf("===============\n\n");
    
    /*
     * 1. الفرق بين #define والمتغير:
     * --------------------------------
     */
    
    /* UPPER ثابت - لا يمكن تغييره */
    /* UPPER = 400;  ← خطأ! لا يمكن تغيير الثابت */
    
    /* fahr متغير - يمكن تغييره */
    fahr = 100;
    fahr = 200;     /* صحيح */
    
    
    /*
     * 2. #define ليست أمر تنفيذي:
     * ----------------------------
     * - لا تنتهي بفاصلة منقوطة
     * - لا تشغل ذاكرة أثناء التنفيذ
     * - المترجم يستبدل الاسم بالقيمة قبل الترجمة
     */
    
    
    /*
     * 3. التسمية:
     * -----------
     * - تُكتب عادةً بحروف كبيرة: UPPER, LOWER, PI
     * - للتمييز عن المتغيرات
     * - اتفاقية شائعة في C
     */
    
    
    /*
     * 4. النطاق (Scope):
     * ------------------
     * - #define يعمل من نقطة تعريفه حتى نهاية الملف
     * - يمكن استخدامه في كل الدوال بعد تعريفه
     */
    
    printf("See comments for important notes about #define\n\n");
}


/*
 * ============================================================================
 * مثال يوضح فائدة الثوابت في الصيانة
 * ============================================================================
 */

#define ARRAY_SIZE 5
#define PASSING_GRADE 50

maintenance_example()
{
    int i, scores[ARRAY_SIZE];
    int sum, average;
    
    printf("Example 8: Maintainability benefit\n");
    printf("===================================\n\n");
    
    /* تعبئة المصفوفة */
    scores[0] = 85;
    scores[1] = 90;
    scores[2] = 45;
    scores[3] = 70;
    scores[4] = 60;
    
    /* حساب المجموع */
    sum = 0;
    for (i = 0; i < ARRAY_SIZE; i = i + 1) {
        /*
         * استخدام ARRAY_SIZE بدلاً من 5:
         * - لو غيرنا حجم المصفوفة، نغير مكان واحد فقط
         * - الحلقة ستعمل تلقائياً مع الحجم الجديد
         */
        sum = sum + scores[i];
    }
    
    average = sum / ARRAY_SIZE;
    
    printf("Average score: %d\n", average);
    
    /* التحقق من النجاح */
    if (average >= PASSING_GRADE) {
        /*
         * استخدام PASSING_GRADE:
         * - لو تغيرت معايير النجاح، نغير مكان واحد
         * - الكود يشرح نفسه
         */
        printf("Result: PASS\n");
    } else {
        printf("Result: FAIL\n");
    }
    
    printf("\n");
    
    /*
     * لو أردنا تغيير حجم المصفوفة إلى 10:
     * - نغير فقط: #define ARRAY_SIZE 10
     * - ونضيف 5 درجات جديدة
     * - باقي الكود سيعمل دون تعديل!
     */
}


/*
 * Entry point للأمثلة
 */
main_with_examples()
{
    example_constants();
    conversion_example();
    compare_define_with_variable();
    maintenance_example();
}

/*
 * ============================================================================
 * Expected Output (للمثال الأساسي):
 * ============================================================================
 * Example 1: Without symbolic constants
 * ======================================
 * 
 * Fahr	Cels
 * 0	-17
 * 20	-6
 * 40	4
 * 60	15
 * 80	26
 * 100	37
 * 120	48
 * 140	60
 * 160	71
 * 180	82
 * 200	93
 * 220	104
 * 240	115
 * 260	126
 * 280	137
 * 300	148
 * 
 * Example 2: With symbolic constants
 * ===================================
 * 
 * Fahr	Cels
 * 0	-17
 * 20	-6
 * 40	4
 * 60	15
 * 80	26
 * 100	37
 * 120	48
 * 140	60
 * 160	71
 * 180	82
 * 200	93
 * 220	104
 * 240	115
 * 260	126
 * 280	137
 * 300	148
 * 
 * (الخرج متطابق، لكن الكود المصدري أوضح وأسهل للصيانة)
 * 
 * ============================================================================
 * ملخص الفوائد:
 * ============================================================================
 * 
 * 1. الوضوح (Clarity)
 *    - UPPER أوضح من 300
 *    - PI أوضح من 3.14159
 *    - الكود يشرح نفسه
 * 
 * 2. الصيانة (Maintainability)
 *    - تغيير واحد في #define يؤثر على كل الكود
 *    - لا حاجة للبحث عن كل استخدام للقيمة
 * 
 * 3. تجنب الأخطاء (Error Prevention)
 *    - لا يمكن تغيير الثابت بالخطأ
 *    - القيم المهمة محمية
 * 
 * 4. المرونة (Flexibility)
 *    - سهل تعديل البرنامج لحالات مختلفة
 *    - مثال: تغيير حدود الجدول، معايير النجاح، إلخ
 * 
 * ============================================================================
 * قواعد استخدام #define:
 * ============================================================================
 * 
 * 1. الموقع:
 *    - في بداية الملف، قبل كل الدوال
 *    - بعد أي #include (سنتعلمه لاحقاً)
 * 
 * 2. الصيغة:
 *    - #define NAME value
 *    - بدون فاصلة منقوطة في النهاية
 * 
 * 3. التسمية:
 *    - حروف كبيرة عادةً: UPPER, MAX_SIZE
 *    - للتمييز عن المتغيرات
 * 
 * 4. القيمة:
 *    - يمكن أن تكون رقم، حرف، أو حتى تعبير
 *    - مثال: #define SQUARE(x) ((x) * (x))
 * 
 * 5. النطاق:
 *    - من نقطة التعريف حتى نهاية الملف
 *    - أو حتى #undef NAME (نادر الاستخدام)
 * 
 * ============================================================================
 * أخطاء شائعة:
 * ============================================================================
 * 
 * 1. إضافة فاصلة منقوطة:
 *    #define PI 3.14;     ← خطأ! سيُستبدل PI بـ 3.14;
 *    
 * 2. محاولة تغيير الثابت:
 *    UPPER = 400;         ← خطأ! UPPER ثابت
 * 
 * 3. نسيان حروف كبيرة:
 *    #define upper 300    ← يعمل، لكن مخالف للاتفاقية
 * 
 * 4. استخدام قبل التعريف:
 *    استخدام UPPER قبل سطر #define UPPER
 *    
 * ============================================================================
 */

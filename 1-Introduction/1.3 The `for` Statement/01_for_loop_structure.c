/*
 * ============================================================================
 * Chapter 1: Introduction
 * Section 1.3: The for Statement
 * Topic: Structure of the for loop
 * ============================================================================
 * 
 * ما هي حلقة for؟
 * -----------------
 * حلقة for هي طريقة أخرى لتكرار الأوامر، مصممة خصيصاً للحالات
 * التي نعرف فيها عدد مرات التكرار أو نحتاج لعداد.
 * 
 * لماذا نحتاج for إذا كان لدينا while؟
 * ----------------------------------------
 * - حلقة for أكثر إيجازاً ووضوحاً للتكرارات المعدودة
 * - تجمع التهيئة والشرط والتحديث في مكان واحد
 * - تقلل احتمالية نسيان تحديث العداد
 * 
 * ============================================================================
 */

main()
{
    /*
     * ============================================================================
     * البنية الأساسية لحلقة for
     * ============================================================================
     * 
     * for (initialization; condition; increment)
     *     statement;
     * 
     * أو مع عدة أوامر:
     * 
     * for (initialization; condition; increment) {
     *     statement1;
     *     statement2;
     * }
     * 
     * الأجزاء الثلاثة:
     * ----------------
     * 1. initialization (التهيئة): يُنفذ مرة واحدة فقط في البداية
     * 2. condition (الشرط): يُفحص قبل كل تكرار
     * 3. increment (التحديث): يُنفذ بعد كل تكرار
     * 
     */
    
    
    /*
     * ============================================================================
     * مثال بسيط: طباعة الأرقام من 1 إلى 5
     * ============================================================================
     */
    
    int i;
    
    printf("Numbers 1 to 5:\n");
    
    /*
     * تشريح حلقة for:
     * ---------------
     * for (i = 1; i <= 5; i = i + 1)
     *      │       │         │
     *      │       │         └─ التحديث: زيادة i بمقدار 1
     *      │       │            ينفذ بعد كل تكرار
     *      │       │
     *      │       └─ الشرط: طالما i أقل من أو يساوي 5
     *      │          يُفحص قبل كل تكرار
     *      │
     *      └─ التهيئة: نبدأ من i = 1
     *         ينفذ مرة واحدة فقط
     */
    for (i = 1; i <= 5; i = i + 1) {
        printf("%d\n", i);
    }
    
    printf("Done!\n\n");
    
    
    /*
     * ============================================================================
     * مثال عملي: جدول تحويل Fahrenheit إلى Celsius
     * ============================================================================
     * 
     * نفس المثال من الدرس السابق، لكن باستخدام for بدلاً من while
     */
    
    int fahr, celsius;
    int lower, upper, step;
    
    lower = 0;      /* الحد الأدنى */
    upper = 300;    /* الحد الأعلى */
    step = 20;      /* حجم الخطوة */
    
    printf("Fahrenheit-Celsius Table\n");
    printf("------------------------\n");
    
    /*
     * حلقة for للجدول:
     * -----------------
     * 
     * for (fahr = lower; fahr <= upper; fahr = fahr + step)
     *      │              │               │
     *      │              │               └─ زيادة fahr بمقدار step (20)
     *      │              │                  بعد كل تكرار
     *      │              │
     *      │              └─ الشرط: استمر طالما fahr <= 300
     *      │
     *      └─ البداية: fahr = 0
     * 
     * لاحظ كيف أن كل ما يتعلق بالعداد موجود في سطر واحد!
     */
    for (fahr = lower; fahr <= upper; fahr = fahr + step) {
        /*
         * حساب Celsius
         * نفس المعادلة: C = 5/9 * (F - 32)
         */
        celsius = 5 * (fahr - 32) / 9;
        
        /* طباعة السطر */
        printf("%d\t%d\n", fahr, celsius);
    }
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * مثال: العد التنازلي
     * ============================================================================
     */
    
    printf("Countdown:\n");
    
    /*
     * يمكن العد للأسفل أيضاً:
     * - نبدأ من 10
     * - الشرط: i >= 1 (طالما أكبر من أو يساوي 1)
     * - التحديث: i = i - 1 (نطرح 1)
     */
    for (i = 10; i >= 1; i = i - 1) {
        printf("%d\n", i);
    }
    printf("Blast off!\n\n");
    
    
    /*
     * ============================================================================
     * مثال: خطوات غير منتظمة
     * ============================================================================
     */
    
    printf("Powers of 2 (up to 64):\n");
    
    /*
     * يمكن استخدام أي تحديث نريده:
     * - نبدأ من 1
     * - في كل مرة نضرب في 2
     * - نتوقف عند 64
     */
    for (i = 1; i <= 64; i = i * 2) {
        printf("%d\n", i);
    }
    
    printf("\n");
    
    
    /*
     * ============================================================================
     * خطوة بخطوة: ماذا يحدث في حلقة for؟
     * ============================================================================
     * 
     * لنأخذ المثال: for (i = 1; i <= 3; i = i + 1)
     * 
     * الخطوة 1 (قبل الحلقة):
     * ------------------------
     * - تنفيذ التهيئة: i = 1
     * 
     * الخطوة 2 (محاولة التكرار الأول):
     * ---------------------------------
     * - فحص الشرط: 1 <= 3؟ نعم ✓
     * - تنفيذ محتوى الحلقة
     * - تنفيذ التحديث: i = 1 + 1 = 2
     * 
     * الخطوة 3 (محاولة التكرار الثاني):
     * ----------------------------------
     * - فحص الشرط: 2 <= 3؟ نعم ✓
     * - تنفيذ محتوى الحلقة
     * - تنفيذ التحديث: i = 2 + 1 = 3
     * 
     * الخطوة 4 (محاولة التكرار الثالث):
     * -----------------------------------
     * - فحص الشرط: 3 <= 3؟ نعم ✓
     * - تنفيذ محتوى الحلقة
     * - تنفيذ التحديث: i = 3 + 1 = 4
     * 
     * الخطوة 5 (محاولة التكرار الرابع):
     * ------------------------------------
     * - فحص الشرط: 4 <= 3؟ لا ✗
     * - الخروج من الحلقة
     * 
     */
    
    
    /*
     * ============================================================================
     * أمثلة على أشكال مختلفة من for
     * ============================================================================
     */
    
    int j, k;
    
    /* مثال 1: متغيرات متعددة */
    printf("Two counters:\n");
    for (i = 1, j = 10; i <= 5; i = i + 1, j = j - 1) {
        /*
         * يمكن تهيئة وتحديث عدة متغيرات:
         * - i يزيد من 1
         * - j ينقص من 10
         * نستخدم الفاصلة , لفصل العمليات
         */
        printf("i=%d, j=%d\n", i, j);
    }
    printf("\n");
    
    
    /* مثال 2: حلقة بدون تهيئة */
    i = 0;  /* نهيئ خارج الحلقة */
    printf("Loop without initialization:\n");
    for (; i < 3; i = i + 1) {
        /*
         * التهيئة فارغة، لكن الفاصلة المنقوطة ; ضرورية
         * هذا مفيد عندما يكون المتغير مُهيأ مسبقاً
         */
        printf("%d\n", i);
    }
    printf("\n");
    
    
    /* مثال 3: حلقة بدون تحديث */
    printf("Loop with manual increment:\n");
    for (i = 0; i < 3; ) {
        /*
         * التحديث فارغ
         * نقوم بالتحديث يدوياً داخل الحلقة
         */
        printf("%d\n", i);
        i = i + 1;  /* التحديث يدوياً */
    }
    printf("\n");
    
    
    /*
     * ============================================================================
     * حلقة for المتداخلة (Nested for loops)
     * ============================================================================
     */
    
    printf("Multiplication table (3x3):\n");
    
    /*
     * حلقة خارجية: للصفوف
     * حلقة داخلية: للأعمدة
     */
    for (i = 1; i <= 3; i = i + 1) {
        /* كل تكرار للحلقة الخارجية = صف جديد */
        
        for (j = 1; j <= 3; j = j + 1) {
            /* الحلقة الداخلية تنفذ كاملة في كل تكرار للخارجية */
            printf("%d ", i * j);
        }
        
        printf("\n");  /* نهاية الصف */
    }
}

/*
 * ============================================================================
 * Expected Output:
 * ============================================================================
 * Numbers 1 to 5:
 * 1
 * 2
 * 3
 * 4
 * 5
 * Done!
 * 
 * Fahrenheit-Celsius Table
 * ------------------------
 * 0	-17
 * 20	-6
 * 40	4
 * 60	15
 * 80	26
 * 100	37
 * 120	48
 * 140	60
 * 160	71
 * 180	82
 * 200	93
 * 220	104
 * 240	115
 * 260	126
 * 280	137
 * 300	148
 * 
 * Countdown:
 * 10
 * 9
 * 8
 * 7
 * 6
 * 5
 * 4
 * 3
 * 2
 * 1
 * Blast off!
 * 
 * Powers of 2 (up to 64):
 * 1
 * 2
 * 4
 * 8
 * 16
 * 32
 * 64
 * 
 * Two counters:
 * i=1, j=10
 * i=2, j=9
 * i=3, j=8
 * i=4, j=7
 * i=5, j=6
 * 
 * Loop without initialization:
 * 0
 * 1
 * 2
 * 
 * Loop with manual increment:
 * 0
 * 1
 * 2
 * 
 * Multiplication table (3x3):
 * 1 2 3 
 * 2 4 6 
 * 3 6 9 
 * 
 * ============================================================================
 * ملاحظات مهمة:
 * ============================================================================
 * 
 * 1. الأجزاء الثلاثة في for
 *    - كلها اختيارية، لكن الفاصلتين المنقوطتين ; ضروريتان
 *    - for (;;) حلقة لانهائية (صحيحة نحوياً)
 * 
 * 2. متى تُنفذ كل جزء؟
 *    - التهيئة: مرة واحدة فقط في البداية
 *    - الشرط: قبل كل تكرار
 *    - التحديث: بعد كل تكرار
 * 
 * 3. الفاصلة , في for
 *    - تسمح بعمليات متعددة في التهيئة أو التحديث
 *    - for (i=0, j=10; ...; i++, j--)
 * 
 * 4. النطاق (Scope)
 *    - في K&R الأولى، المتغيرات تُعلن في بداية الدالة
 *    - i موجود قبل وبعد الحلقة
 * 
 * 5. الحلقات المتداخلة
 *    - الحلقة الداخلية تكمل دورتها كاملة في كل تكرار للخارجية
 *    - إذا الخارجية 3 مرات والداخلية 4 مرات = 12 تكرار كلي
 * 
 * 6. الأقواس المعقوفة
 *    - ضرورية عند وجود أكثر من أمر واحد
 *    - يُفضل استخدامها دائماً للوضوح
 * 
 * ============================================================================
 */
